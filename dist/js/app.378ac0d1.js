(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);m&&m(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var m=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0070":function(t,e,a){"use strict";var s=a("2317"),n=a.n(s);n.a},"01d5":function(t,e,a){"use strict";var s=a("37c4"),n=a.n(s);n.a},"034f":function(t,e,a){"use strict";var s=a("85ec"),n=a.n(s);n.a},"12f0":function(t,e,a){t.exports=a.p+"img/console.63eb8715.png"},2317:function(t,e,a){},"37c4":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Navbar"),a("div",{staticClass:"container"},[a("router-view")],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-5 bg-white border-bottom shadow-sm"},[a("h5",{staticClass:"my-0 mr-md-auto font-weight-normal"},[a("router-link",{attrs:{to:"/"}},[t._v("PULS")])],1),a("nav",{staticClass:"my-2 my-md-0 mr-md-3"},[t.isTerminalOn?a("router-link",{staticClass:"p-2 text-dark text-danger",attrs:{to:"/stop"}},[t._v("Arrêter la borne")]):a("router-link",{staticClass:"p-2 text-dark",attrs:{to:"/start"}},[t._v("Démarrer la borne")]),t.isLoggedIn&&t.isAdmin?a("span",[a("a",{staticClass:"dropdown-toggle p-2",attrs:{href:"#",role:"button",id:"dropdownAdminMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Admin ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownAdminMenu"}},[a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/users"}},[t._v("Users")]),a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/terminals"}},[t._v("Terminaux")]),a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/campaigns"}},[t._v("Campagnes")]),a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/customers"}},[t._v("Clients")])],1)]):t._e()],1),t.isLoggedIn?a("a",{staticClass:"btn btn-outline-primary",on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Déconnexion")]):a("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/login"}},[a("font-awesome-icon",{attrs:{icon:"user-secret"}}),t._v(" Connexion ")],1)],1)},o=[],l={name:"Navbar",computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},isTerminalOn:function(){return this.$store.state.currentTerminal.is_on}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push("/login")}}},c=l,m=a("2877"),u=Object(m["a"])(c,r,o,!1,null,null,null),p=u.exports,d={name:"App",components:{Navbar:p}},v=d,h=(a("034f"),Object(m["a"])(v,n,i,!1,null,null,null)),f=h.exports,g=(a("b0c0"),a("8c4f")),_=(a("d3b7"),a("acd8"),a("2f62")),C=a("bc3a"),b=a.n(C);s["a"].use(_["a"]);var w=new _["a"].Store({state:{status:"",errors:"",token:localStorage.getItem("token")||"",user_id:localStorage.getItem("user_id")||"",is_admin:"true"==localStorage.getItem("is_admin")||"",is_superadmin:"true"==localStorage.getItem("is_superadmin")||"",currentPayment:{},currentDonator:"",newDonatorEmail:"",currentTerminal:"",currentCampaign:"",session:{start_time:"",end_time:""}},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.token=e.token,t.user_id=e.user_id,t.is_admin=e.is_admin,t.is_superadmin=e.is_superadmin},auth_error:function(t,e){t.status="error",t.errors=e.response.data},logout:function(t){t.status="",t.token="",t.user_id="",t.is_admin=!1,t.is_superadmin=!1},saveCurrentDonator:function(t,e){t.currentDonator=e},saveCurrentTerminal:function(t,e){t.currentTerminal=e},startTerminal:function(t,e){t.currentTerminal=e.terminal,t.currentCampaign=e.campaign},stopTerminal:function(t){t.currentTerminal="",t.currentCampaign=""},saveNewDonatorEmail:function(t,e){t.newDonatorEmail=e},deleteGamingStates:function(t){t.newDonatorEmail="",t.currentDonator="",t.currentPayment={},t.currentTerminal="",t.currentCampaign="",t.session.start_time="",t.session.end_time=""},startSession:function(t){t.session.start_time=new Date},endSession:function(t){t.session.end_time=new Date},payment:function(t,e){t.currentPayment.amount=parseFloat(e.amount),t.currentPayment.id=e.id}},actions:{login:function(t,e){var a=t.commit;return new Promise((function(t,s){a("auth_request"),b.a.post("https://puls-preprod.herokuapp.com/auth/",e).then((function(e){var s="Token "+e.data.token;localStorage.setItem("token",s),localStorage.setItem("user_id",e.data.user_id),localStorage.setItem("is_admin",e.data.is_admin),localStorage.setItem("is_superadmin",e.data.is_superadmin),b.a.defaults.headers.common["Authorization"]=s,a("auth_success",{token:s,user_id:e.data.user_id,is_admin:e.data.is_admin,is_superadmin:e.data.is_superadmin}),b.a.get("https://puls-preprod.herokuapp.com/terminal/mine/on/").then((function(t){a("saveCurrentTerminal",t.data)})).catch((function(t){console.log(t.response)})),t(e)})).catch((function(t){a("auth_error"),localStorage.removeItem("token"),s(t)}))}))},register:function(t,e){var a=t.commit;return new Promise((function(t,s){a("auth_request"),b.a.post("https://puls-preprod.herokuapp.com/api/user/",e).then((function(e){console.log(e),t(e)})).catch((function(t){a("auth_error",t),localStorage.removeItem("token"),s(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t){b.a.get("https://puls-preprod.herokuapp.com/terminal/mine/off/").then((function(e){t(e)})).catch((function(t){console.log(t.response)})),e("logout"),localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("is_admin"),localStorage.removeItem("is_superadmin"),delete b.a.defaults.headers.common["Authorization"]}))}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status},isAdmin:function(t){return t.is_admin},isSuperAdmin:function(t){return t.is_superadmin}},modules:{}}),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[t._v(" Welcome! ")])},y=[],$={name:"home"},k=$,E=Object(m["a"])(k,x,y,!1,null,null,null),T=E.exports,D=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("h1",[t._v("This is an Users page")])])}],A={},S=Object(m["a"])(A,D,q,!1,null,null,null),j=S.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[t._m(0),a("div",{staticClass:"col-8 offset-2 mt-4"},[a("div",{staticClass:"row mb-3 d-flex justify-content-between"},[a("span"),a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/campaign/add"}},[t._v("Ajouter une campagne")])],1),a("div",{staticClass:"row"},t._l(t.campaigns,(function(t){return a("Campaign",{key:t.id,attrs:{campaign:t}})})),1)])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Gestion de campagnes")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])])}],O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"campaign card w-100 mb-3 py-3 px-4"},[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("div",{staticClass:"clickable d-flex align-items-center",on:{click:t.showDetail}},[a("div",{staticClass:"d-flex flex-column justify-content-between"},[a("h3",[t._v(t._s(t.currentCampaign.name))]),a("p",[a("strong",[t._v("Description :")]),t._v(" "+t._s(t.currentCampaign.description))])])]),a("div",{staticClass:"actions d-flex align-self-stretch small"},[a("a",{staticClass:"btn-rounded mr-2",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.editCampaign(e)}}},[a("font-awesome-icon",{attrs:{icon:"pen"}})],1),a("a",{staticClass:"btn-rounded text-danger",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deleteCampaign(e)}}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)])])])},L=[],I={name:"Campaign",props:["campaign"],data:function(){return{currentCampaign:this.campaign}},mounted:function(){},methods:{showDetail:function(){this.$router.push({name:"campaign",params:{id:this.currentCampaign.id}})},editCampaign:function(){this.$router.push({name:"edit-campaign",params:{id:this.currentCampaign.id}})},deleteCampaign:function(){this.$router.push({name:"edit-campaign",params:{id:this.currentCampaign.id}})}}},M=I,V=(a("f77e"),Object(m["a"])(M,O,L,!1,null,null,null)),F=V.exports,H={name:"Campaigns",components:{Campaign:F},data:function(){return{campaigns:""}},mounted:function(){this.getCampaigns()},methods:{getCampaigns:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/campaign/").then((function(e){t.campaigns=e.data})).catch((function(t){console.log(t.response)}))}}},z=H,G=Object(m["a"])(z,P,N,!1,null,null,null),U=G.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row d-flex flex-column align-items-center"},[a("span",{staticClass:"small"},[t._v("Campagne n° "+t._s(t.campaign.id))]),a("h1",{staticClass:"display-4 text-center"},[t._v(t._s(t.campaign.name))]),a("p",{staticClass:"lead w-100 text-center"},[t._v("Description: "+t._s(t.campaign.description))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"lead"},[t._v("Montant récolté aujourd'hui")]),a("div",{staticClass:"display-3"},[t._v(" "+t._s(t.totalToday)+" € ")])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"lead"},[t._v("Montant total récolté")]),a("div",{staticClass:"display-3"},[t._v(" "+t._s(t.totalEver)+" € ")])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"lead"},[t._v("Montant moyen")]),a("div",{staticClass:"display-3"},[t._v(" "+t._s(t.avgDonation)+" € ")])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"my-3"},[t._v("Derniers donateurs")]),a("p",{staticClass:"lead "},[t._v("Les 5 derniers donateurs pour cette campagne.")]),a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.lastDonations,(function(e,s){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.donator.name))]),a("td",[t._v(t._s(e.donator.gender))]),a("td",[t._v(t._s(e.donator.email))]),a("td",[t._v(t._s(e.amount)+" €")]),a("td",[t._v(t._s(e.terminal))])])})),0)])])])])},R=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Nom")]),a("th",{attrs:{scope:"col"}},[t._v("Sexe")]),a("th",{attrs:{scope:"col"}},[t._v("Email")]),a("th",{attrs:{scope:"col"}},[t._v("Don")]),a("th",{attrs:{scope:"col"}},[t._v("Terminal")])])])}],J={name:"Campaign",data:function(){return{campaign:"",totalToday:"",totalEver:"",avgDonation:"",lastDonations:{}}},mounted:function(){this.getCampaign()},methods:{getCampaign:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/campaign/"+this.$route.params.id+"/").then((function(e){t.campaign=e.data,t.getStats()})).catch((function(t){console.log(t.response)}))},getStats:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/campaign/"+this.$route.params.id+"/stats/").then((function(e){var a=JSON.parse(e.data);t.totalToday=a.total_today,t.totalEver=a.total_ever,t.avgDonation=a.avg_amount,t.lastDonations=a.last_donations})).catch((function(t){console.log(t.response)}))}}},W=J,K=Object(m["a"])(W,B,R,!1,null,null,null),Q=K.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Campagne n° "+t._s(t.campaign.id))]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])]),a("div",{staticClass:"col-8 offset-2"},[a("EditSingleCampaign",{attrs:{campaign:t.campaign}})],1)])},Y=[],Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[t.errors?a("div",{staticClass:"alert alert-danger w-100"},[t._v(" Une erreur s'est produite. Vérifier le formulaire. ")]):t._e(),t.success?a("div",{staticClass:"alert alert-success w-100"},[t._v(" La modification a été effectuée avec succès. ")]):t._e()]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de la campagne")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.name,expression:"campaign.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.campaign.name},on:{input:function(e){e.target.composing||t.$set(t.campaign,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent à la campagne.")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.description,expression:"campaign.description"}],staticClass:"form-control",domProps:{value:t.campaign.description},on:{input:function(e){e.target.composing||t.$set(t.campaign,"description",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"html_template"}},[t._v("HTML Template")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.html_template,expression:"campaign.html_template"}],staticClass:"form-control",domProps:{value:t.campaign.html_template},on:{input:function(e){e.target.composing||t.$set(t.campaign,"html_template",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"htmlHelp"}},[t._v("Template HTML qui apparaît à la fin de chaque partie.")])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/campaigns"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v("Enregistrer les modifications")])],1)])])},tt=[],et={name:"EditCampaignForm",props:["campaign"],data:function(){return{success:!1,errors:!1}},methods:{edit:function(){var t=this;this.campaign&&(this.success=!1,this.errors=!1,this.$http.put("https://puls-preprod.herokuapp.com/campaign/"+this.campaign.id+"/",this.campaign).then((function(e){t.success=!0,t.campaign=e.data})).catch((function(e){t.errors=!0,console.log(e.response)})))}}},at=et,st=Object(m["a"])(at,Z,tt,!1,null,null,null),nt=st.exports,it={name:"EditCampaign",components:{EditSingleCampaign:nt},data:function(){return{campaign:{}}},mounted:function(){this.getCampaign()},methods:{getCampaign:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/campaign/"+this.$route.params.id+"/").then((function(e){t.campaign=e.data})).catch((function(t){console.log(t.response)}))}}},rt=it,ot=Object(m["a"])(rt,X,Y,!1,null,null,null),lt=ot.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[t._m(0),a("div",{staticClass:"col-8 offset-2"},[a("AddSingleCampaign")],1)])},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Ajouter une campagne")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])])}],ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[t.errors?a("div",{staticClass:"alert alert-danger w-100"},[t._v(" Une erreur s'est produite. Vérifier le formulaire. ")]):t._e()]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de la campagne")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.name,expression:"campaign.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.campaign.name},on:{input:function(e){e.target.composing||t.$set(t.campaign,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent à la campagne.")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.description,expression:"campaign.description"}],staticClass:"form-control",domProps:{value:t.campaign.description},on:{input:function(e){e.target.composing||t.$set(t.campaign,"description",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"html_template"}},[t._v("HTML Template")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.html_template,expression:"campaign.html_template"}],staticClass:"form-control",domProps:{value:t.campaign.html_template},on:{input:function(e){e.target.composing||t.$set(t.campaign,"html_template",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"htmlHelp"}},[t._v("Template HTML qui apparaît à la fin de chaque partie.")])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/campaigns"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v("Enregistrer les modifications")])],1)])])},pt=[],dt={name:"AddCampaignForm",data:function(){return{campaign:{},success:!1,errors:!1}},methods:{edit:function(){var t=this;this.campaign&&(this.success=!1,this.errors=!1,this.campaign.author=this.$store.state.user_id,this.$http.post("https://puls-preprod.herokuapp.com/campaign/",this.campaign).then((function(e){console.log(e),t.$router.push("/campaigns")})).catch((function(e){t.errors=!0,console.log(e.response)})))}}},vt=dt,ht=Object(m["a"])(vt,ut,pt,!1,null,null,null),ft=ht.exports,gt={name:"AddCampaign",components:{AddSingleCampaign:ft}},_t=gt,Ct=Object(m["a"])(_t,ct,mt,!1,null,null,null),bt=Ct.exports,wt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("h1",[t._v("This is an Customers page")])])}],yt={},$t=Object(m["a"])(yt,wt,xt,!1,null,null,null),kt=$t.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[t._m(0),a("div",{staticClass:"col-8 offset-2 mt-4"},[a("div",{staticClass:"row mb-3 d-flex justify-content-end"},[a("router-link",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{to:"/terminal/add"}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),a("span",[t._v("Nouveau terminal")])],1)],1),a("div",{staticClass:"row"},t._l(t.terminals,(function(t){return a("Terminal",{key:t.id,attrs:{terminal:t}})})),1)])])},Tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Gestion de terminaux")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])])}],Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"terminal card w-100"},[s("div",{staticClass:"terminal d-flex align-items-center justify-content-between"},[s("div",{staticClass:"clickable py-2 px-3 d-flex align-items-center",on:{click:t.showDetail}},[s("img",{staticClass:"mx-3",attrs:{src:a("12f0"),height:"70",alt:"Console"}}),s("div",{staticClass:"d-flex flex-column justify-content-between"},[s("strong",[t._v(t._s(t.currentTerminal.name))]),s("p",{staticClass:"small mb-1"},[t._v("Campagne: "),s("i",[t._v(t._s(t.currentCampaign.name))])]),s("p",[t.currentTerminal.is_active?s("span",{staticClass:"badge badge-success mr-2"},[t._v("Activé")]):s("span",{staticClass:"badge badge-danger mr-2"},[t._v("Inactive")]),t.currentTerminal.is_on?s("span",{staticClass:"badge badge-success mr-2"},[t._v("Allumé")]):s("span",{staticClass:"badge badge-danger mr-2"},[t._v("Eteint")]),t.currentTerminal.is_playing?s("span",{staticClass:"badge badge-success"},[t._v("En jeu")]):s("span",{staticClass:"badge badge-warning"},[t._v("En attente")])])])]),s("div",{staticClass:"links d-flex flex-column align-items-stretch bg-light align-self-stretch justify-content-around border-left"},[t.currentTerminal.is_active?s("a",{staticClass:"text-danger px-3",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deactivateTerminal(e)}}},[t._v("Désactiver le terminal")]):s("a",{staticClass:"text-danger px-3",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.activateTerminal(e)}}},[t._v("Activer le terminal")]),s("a",{staticClass:"px-3",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.editTerminal(e)}}},[t._v("Modifier le terminal")])])])])},qt=[],At={name:"Terminals",props:["terminal"],data:function(){return{currentTerminal:this.terminal,currentCampaign:{}}},mounted:function(){var t=this;null!=this.currentTerminal.campaign?this.$http.get("https://puls-preprod.herokuapp.com/campaign/"+this.currentTerminal.campaign+"/").then((function(e){t.currentCampaign=e.data})):this.currentCampaign.name="Non assigné"},methods:{showDetail:function(){this.$router.push({name:"terminal",params:{id:this.currentTerminal.id}})},editTerminal:function(){this.$router.push({name:"edit-terminal",params:{id:this.currentTerminal.id}})},activateTerminal:function(){var t=this;this.currentTerminal.campaign?this.$http.get("https://puls-preprod.herokuapp.com/terminal/"+this.currentTerminal.id+"/activate/").then((function(e){t.currentTerminal=e.data})):console.error("Impossible d'activer un terminal sans campagne.")},deactivateTerminal:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/terminal/"+this.currentTerminal.id+"/deactivate/").then((function(e){t.currentTerminal=e.data}))}}},St=At,jt=(a("0070"),Object(m["a"])(St,Dt,qt,!1,null,null,null)),Pt=jt.exports,Nt={name:"Terminals",components:{Terminal:Pt},data:function(){return{terminals:""}},mounted:function(){this.getTerminals()},methods:{getTerminals:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/terminal/").then((function(e){t.terminals=e.data})).catch((function(t){console.log(t.response)}))}}},Ot=Nt,Lt=Object(m["a"])(Ot,Et,Tt,!1,null,null,null),It=Lt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Terminal : "+t._s(t.terminal.name))]),a("p",{staticClass:"lead w-100 text-center"},[t._v("Campagne: "+t._s(t.campaign.name))]),a("p",{staticClass:"lead w-100 text-center"},[t.terminal.is_active?a("span",{staticClass:"badge badge-success mr-2"},[t._v("Activé")]):a("span",{staticClass:"badge badge-danger mr-2"},[t._v("Inactive")]),t.terminal.is_on?a("span",{staticClass:"badge badge-success mr-2"},[t._v("Allumé")]):a("span",{staticClass:"badge badge-danger mr-2"},[t._v("Eteint")]),t.terminal.is_playing?a("span",{staticClass:"badge badge-success"},[t._v("En jeu")]):a("span",{staticClass:"badge badge-warning"},[t._v("En attente")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-7 mt-4"},[a("h3",{staticClass:"my-3"},[t._v("Derniers donateurs")]),a("p",{staticClass:"lead"},[t._v("Les 5 derniers donateurs sur ce terminal.")]),a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.donations,(function(e,s){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.donator.name))]),a("td",[t._v(t._s(e.donator.gender))]),a("td",[t._v(t._s(e.donator.email))]),a("td",[t._v(t._s(e.amount)+" €")]),a("td",[t._v("Super Mario Bros")])])})),0)])]),a("div",{staticClass:"col-4 offset-1 mt-4"},[a("h3",{staticClass:"my-3"},[t._v("Statistiques")]),a("div",{},[a("p",{staticClass:"lead"},[t._v("Session moyenne")]),a("p",{staticClass:"display-4"},[t._v(t._s(t.avgTS))])]),a("div",{},[a("p",{staticClass:"lead"},[t._v("Donation moyenne")]),a("p",{staticClass:"display-4"},[t._v(t._s(t.avgDonations)+" €")])])])])])},Vt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Nom")]),a("th",{attrs:{scope:"col"}},[t._v("Sexe")]),a("th",{attrs:{scope:"col"}},[t._v("Email")]),a("th",{attrs:{scope:"col"}},[t._v("Don")]),a("th",{attrs:{scope:"col"}},[t._v("Jeu choisi")])])])}],Ft=(a("5319"),{name:"Terminal",data:function(){return{terminal:"",campaign:"",donations:{},avgDonations:"",avgTS:""}},mounted:function(){this.getTerminal(),this.getStats()},methods:{getTerminal:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/terminal/"+this.$route.params.id+"/").then((function(e){t.terminal=e.data,t.$http.get("https://puls-preprod.herokuapp.com/campaign/"+t.terminal.campaign+"/").then((function(e){t.campaign=e.data})).catch((function(t){console.log(t.response)}))})).catch((function(t){console.log(t.response)}))},getStats:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/terminal/"+this.$route.params.id+"/stats/").then((function(e){var a=JSON.parse(e.data);t.avgDonations=a.avg_amount,t.donations=a.payments,t.avgTS=a.avg_ts.replace(/"/g,"")})).catch((function(t){console.log(t.response)}))}}}),Ht=Ft,zt=Object(m["a"])(Ht,Mt,Vt,!1,null,null,null),Gt=zt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Terminal n° "+t._s(t.terminal.id))]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])]),a("div",{staticClass:"col-8 offset-2"},[a("EditSingleTerminal",{attrs:{terminal:t.terminal,campaigns:t.campaigns}})],1)])},Bt=[],Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[t.errors?a("div",{staticClass:"alert alert-danger w-100"},[t._v(" Une erreur s'est produite. Vérifier le formulaire. ")]):t._e(),t.success?a("div",{staticClass:"alert alert-success w-100"},[t._v(" La modification a été effectuée avec succès. ")]):t._e()]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom du terminal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.name,expression:"terminal.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.terminal.name},on:{input:function(e){e.target.composing||t.$set(t.terminal,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent au terminal.")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"owner"}},[t._v("Propriétaire")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.owner,expression:"terminal.owner"}],staticClass:"form-control",attrs:{type:"text",disabled:"","aria-describedby":"ownerHelp"},domProps:{value:t.terminal.owner},on:{input:function(e){e.target.composing||t.$set(t.terminal,"owner",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"campaign"}},[t._v("Campagne")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.terminal.campaign,expression:"terminal.campaign"}],staticClass:"form-control",attrs:{id:"campaign"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.terminal,"campaign",e.target.multiple?a:a[0])}}},t._l(t.campaigns,(function(e){return a("option",{key:e.id,domProps:{selected:t.terminal.campaign==e.id,value:e.id}},[t._v(t._s(e.name))])})),0),a("small",{staticClass:"form-text text-muted",attrs:{id:"campaignHelp"}},[t._v("Choisir la campagne de sensibilisation active sur le terminal.")])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/terminals"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v("Enregistrer les modifications")])],1)])])},Jt=[],Wt={name:"EditTerminalForm",props:["terminal","campaigns"],data:function(){return{success:!1,errors:!1}},methods:{edit:function(){var t=this;this.terminal&&(this.success=!1,this.errors=!1,this.$http.put("https://puls-preprod.herokuapp.com/terminal/"+this.terminal.id+"/",this.terminal).then((function(e){t.success=!0,t.terminal=e.data})).catch((function(e){t.errors=!0,console.log(e.response)})))}}},Kt=Wt,Qt=Object(m["a"])(Kt,Rt,Jt,!1,null,null,null),Xt=Qt.exports,Yt={name:"EditTerminal",components:{EditSingleTerminal:Xt},data:function(){return{terminal:"",campaigns:{}}},mounted:function(){this.getTerminal(),this.getCampaigns()},methods:{getCampaigns:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/campaign/").then((function(e){t.campaigns=e.data})).catch((function(t){console.log(t.response)}))},getTerminal:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/terminal/"+this.$route.params.id+"/").then((function(e){t.terminal=e.data})).catch((function(t){console.log(t.response)}))}}},Zt=Yt,te=Object(m["a"])(Zt,Ut,Bt,!1,null,null,null),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.formVisible?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("a",{staticClass:"mb-2",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[t._v("Retour au choix du client")])]),t._m(2)])]),a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"mt-1"},[t.choosenCustomer?a("h4",[t._v("Choix du client")]):a("h4",[t._v("Nouveau client")]),a("p",{staticClass:"small"},[t._v("Le compte client lié au terminal.")])]),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de l'entreprise")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.company,expression:"customer.company"}],staticClass:"form-control",attrs:{type:"text",disabled:""!=t.choosenCustomer},domProps:{value:t.customer.company},on:{input:function(e){e.target.composing||t.$set(t.customer,"company",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom d'utilisateur")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Mot de passe")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom du terminal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.name,expression:"terminal.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.terminal.name},on:{input:function(e){e.target.composing||t.$set(t.terminal,"name",e.target.value)}}})])]),a("div",{staticClass:"row mt-3 text-center"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.addTerminal(e)}}},[t._v(" Enregistrer ")])])])]):a("div",[t._m(0),a("div",{staticClass:"col-6 offset-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.choosenCustomer,expression:"choosenCustomer"}],staticClass:"custom-select mb-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.choosenCustomer=e.target.multiple?a:a[0]}}},t._l(t.customers,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.company))])})),0),a("button",{staticClass:"btn btn-primary w-100",on:{click:function(e){return e.preventDefault(),t.continueWithCustomer(e)}}},[t._v("Choisir un client existant")]),t._m(1),a("button",{staticClass:"btn btn-success w-100",on:{click:function(e){return e.preventDefault(),t.continueWithoutCustomer(e)}}},[t._v("Créer un nouveau client")])])])},se=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Choisir un client")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hr-text my-4"},[a("span",{staticClass:"mx-3"},[t._v("ou")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Nouveau terminal")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-3"},[a("h4",[t._v("Paramètres de connexion")]),a("p",{staticClass:"small"},[t._v("Les identifiants que le client doit utiliser pour connecter son terminal.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-1"},[a("h4",[t._v("Nom du terminal")]),a("p",{staticClass:"small"},[t._v("Un nom clair pour identifier le terminal.")])])}],ne={name:"AddTerminal",components:{},data:function(){return{formVisible:!1,choosenCustomer:"",customer:{},user:{},terminal:{},customers:{}}},mounted:function(){this.getCustomers()},methods:{addTerminal:function(){var t=this;this.customer&&this.user&&this.terminal&&this.$http.post("https://puls-preprod.herokuapp.com/customer/",this.customer).then((function(e){t.customer=e.data,t.user.customer=t.customer.id,t.$http.post("https://puls-preprod.herokuapp.com/user/",t.user).then((function(e){t.user=e.data,t.terminal.owner=t.user.id,t.terminal.campaign="",t.$http.post("https://puls-preprod.herokuapp.com/terminal/",t.terminal).then((function(e){t.terminal=e.data,t.$router.push("/terminals")})).catch((function(t){console.log("Error in terminal post"),console.error(t.response)}))})).catch((function(t){console.log("Error in user post"),console.error(t.response)}))})).catch((function(t){console.log("Error in Customer post"),console.error(t.response)}))},getCustomers:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/customer/").then((function(e){t.customers=e.data})).catch((function(t){console.log(t.response)}))},continueWithCustomer:function(){var t=this;this.choosenCustomer&&this.$http.get("https://puls-preprod.herokuapp.com/customer/"+this.choosenCustomer+"/").then((function(e){t.customer=e.data,t.formVisible=!0})).catch((function(t){console.log(t.response)}))},continueWithoutCustomer:function(){this.choosenCustomer="",this.customer={},this.formVisible=!0},goBack:function(){this.choosenCustomer="",this.customer={},this.formVisible=!1}}},ie=ne,re=(a("01d5"),Object(m["a"])(ie,ae,se,!1,null,null,null)),oe=re.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t.error?a("div",{staticClass:"alert alert-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e(),a("form",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"firstName"}},[t._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.credentials.username},on:{input:function(e){e.target.composing||t.$set(t.credentials,"username",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Valid first name is required. ")])])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"firstName"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{type:"password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Password is invalid. ")])])]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary btn-lg",on:{click:t.login}},[t._v("Se connecter")])])])])])},ce=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"},[a("h1",{staticClass:"display-4"},[t._v("Connexion")]),a("p",{staticClass:"lead"},[t._v("Connectez votre terminal pour le mettre en service.")])])}],me={name:"Auth",data:function(){return{credentials:{username:"",password:""},loading:!1,error:""}},methods:{login:function(){var t=this;this.loading=!0,this.$store.dispatch("login",this.credentials).then((function(){return t.$router.push("/start")})).catch((function(e){t.loading=!1,t.error=e.response}))}}},ue=me,pe=Object(m["a"])(ue,le,ce,!1,null,null,null),de=pe.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.terminal.is_active?a("div",{staticClass:"home"},[a("div",{staticClass:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"},[a("h1",{staticClass:"display-4"},[t._v("Campagne : "+t._s(t.campaign.name))]),a("p",{staticClass:"lead"},[t._v(" Cliquer sur le bouton pour commencer. ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/payment"}},[t._v("Commencer ")])],1)])]):a("div",[t._m(0)])])},he=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"},[a("h1",{staticClass:"display-4"},[t._v("Borne désactivée")]),a("p",{staticClass:"lead"},[t._v(" Cette borne est actuellement indisponible, veuillez réessayer plus tard. ")])])}],fe={name:"StartTerminal",data:function(){return{email:"",terminal:{},campaign:{}}},mounted:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/terminal/mine/").then((function(e){t.$store.commit("startTerminal",e.data),t.terminal=e.data.terminal,t.campaign=e.data.campaign,t.$http.get("https://puls-preprod.herokuapp.com/terminal/mine/on/")})).catch((function(t){console.error(t.response)}))}},ge=fe,_e=Object(m["a"])(ge,ve,he,!1,null,null,null),Ce=_e.exports,be=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},we=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home"},[a("div",{staticClass:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"},[a("h1",{staticClass:"display-4"},[t._v("Borne désactivée")]),a("p",{staticClass:"lead"},[t._v(" Cliquer sur start pour relancer la borne. ")])])])])}],xe={name:"StopTerminal",mounted:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/terminal/mine/off/").then((function(e){console.log(e),t.$store.commit("stopTerminal")})).catch((function(t){console.error(t.response)}))}},ye=xe,$e=Object(m["a"])(ye,be,we,!1,null,null,null),ke=$e.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[t._m(0),a("form",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Email invalide. ")])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.donatorLogin(e)}}},[t._v("Suivant")])])])])])},Te=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"},[a("h1",{staticClass:"display-4"},[t._v("Identifiez-vous")]),a("p",{staticClass:"lead"},[t._v(" Veuillez rentrer un email pour nous permettre de vous identifier. ")])])}],De={name:"DonatorLogin",data:function(){return{donator:{},newDonator:{},email:""}},methods:{donatorLogin:function(){var t=this;this.$http.get("https://puls-preprod.herokuapp.com/donator/email/"+this.email+"/").then((function(e){t.$store.commit("saveCurrentDonator",e.data),t.$router.push("/donator/login")})).catch((function(e){404==e.response.status&&(t.$store.commit("saveNewDonatorEmail",t.email),t.$router.push("/donator/login"))}))}}},qe=De,Ae=Object(m["a"])(qe,Ee,Te,!1,null,null,null),Se=Ae.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[t.donator?a("div",[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Bienvenue, "),a("strong",[t._v(t._s(t.donator.name))]),t._v(" !")]),a("a",[t._v("Ce n'est pas vous ?")])]),a("div",{staticClass:"row mt-3 text-center"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.gotoGame(e)}}},[t._v("Poursuivre")])])]):t.email?a("div",[t._m(0),a("form",[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"name"}},[t._v("Votre email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Valid email is required. ")])])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"name"}},[t._v("Votre nom")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newDonator.name,expression:"newDonator.name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.newDonator.name},on:{input:function(e){e.target.composing||t.$set(t.newDonator,"name",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Valid name is required. ")])])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"name"}},[t._v("Votre sexe")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newDonator.gender,expression:"newDonator.gender"}],staticClass:"custom-select d-block w-100",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newDonator,"gender",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"O"}},[t._v("Non spécifié...")]),a("option",{attrs:{value:"M"}},[t._v("Homme")]),a("option",{attrs:{value:"F"}},[t._v("Femme")])])])]),a("div",{staticClass:"row mt-3 text-center"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary",on:{click:t.registerDonator}},[t._v("Donner")])])])])]):a("div",[t._v(" Erreur: veuillez contacter le support. ")])])},Pe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mb-4"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Vos informations")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])}],Ne={name:"DonatorRegister",data:function(){return{donator:{},newDonator:{},email:"",payment:""}},mounted:function(){this.donator=this.$store.state.currentDonator,this.email=this.$store.state.newDonatorEmail,this.payment=this.$store.state.currentPayment},methods:{registerDonator:function(){var t=this;this.email&&(this.newDonator.email=this.email),this.$http.post("https://puls-preprod.herokuapp.com/donator/",this.newDonator).then((function(e){201==e.status&&(t.$store.commit("saveCurrentDonator",e.data),t.donator=e.data,t.gotoGame())})).catch((function(t){console.log(t.response)}))},gotoGame:function(){var t=this;this.payment?this.$http.patch("https://puls-preprod.herokuapp.com/payment/"+this.payment.id+"/",{donator:this.donator.id}).then((function(e){console.log(e),t.$store.commit("startSession"),t.$router.push("/play")})).catch((function(t){console.log(t)})):console.error("Fatal error")}}},Oe=Ne,Le=Object(m["a"])(Oe,je,Pe,!1,null,null,null),Ie=Le.exports,Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[t._m(0),t._m(1),a("div",{staticClass:"form card py-4 px-3 m-0"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"amount"}},[t._v("Montant choisi")]),a("div",{staticClass:"input-group"},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}})]),a("div",{staticClass:"invalid-feedback"},[t._v(" Valid amount is required. ")])])]),a("div",{staticClass:"row mt-3 text-center"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary",on:{click:t.pay}},[t._v("Payer sans contact")])])])])])},Ve=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Paiement")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row text-center mb-3"},[s("img",{staticClass:"mx-auto",attrs:{src:a("67d6"),width:"100",alt:"Contact Less"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("€")])])}],Fe={name:"Payment",data:function(){return{amount:"",payment:""}},methods:{pay:function(){var t=this;this.amount>0&&(this.payment={donator:"",terminal:this.$store.state.currentTerminal.id,campaign:this.$store.state.currentCampaign.id,method:"Contactless",status:"Accepted",amount:this.amount,currency:"EUR"},this.$http.post("https://puls-preprod.herokuapp.com/payment/",this.payment).then((function(e){console.log(e.status),t.$store.commit("payment",{amount:t.amount,id:e.data.id}),t.$router.push("/donator")})).catch((function(t){console.log(t.response)})))}}},He=Fe,ze=Object(m["a"])(He,Me,Ve,!1,null,null,null),Ge=ze.exports,Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[t._m(0),a("div",{staticClass:"row"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.endGame(e)}}},[t._v("Fin du jeu")])])])},Be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Début du jeu")]),a("p",{staticClass:"lead"},[t._v("Veuillez patienter, votre partie va débuter dans quelques secondes.")])])}],Re={name:"Play",data:function(){return{donator:{}}},mounted:function(){this.donator=this.$store.state.currentDonator,this.$http.get("https://puls-preprod.herokuapp.com/terminal/mine/play/").then((function(t){console.log(t)}))},methods:{endGame:function(){this.$router.push("/endgame")}}},Je=Re,We=Object(m["a"])(Je,Ue,Be,!1,null,null,null),Ke=We.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[t._m(0),a("div",{staticClass:"message my-4"},[t._v(" "+t._s(t.campaign.html_template)+" ")]),a("div",{staticClass:"row"},[a("button",{staticClass:"btn btn-primary btn-lg",on:{click:function(e){return e.preventDefault(),t.restart(e)}}},[t._v("Merci !")])])])},Xe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Merci pour votre don")]),a("p",{staticClass:"lead"},[t._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.")])])}],Ye={name:"Endgame",data:function(){return{donator:{},terminal:{},campaign:{},session:{}}},mounted:function(){this.donator=this.$store.state.currentDonator,this.terminal=this.$store.state.currentTerminal,this.campaign=this.$store.state.currentCampaign,this.$http.get("https://puls-preprod.herokuapp.com/terminal/mine/gameover/")},methods:{restart:function(){var t=this;this.$store.commit("endSession"),this.session={start_time:this.$store.state.session.start_time,end_time:this.$store.state.session.end_time,donator:this.donator.id,campaign:this.campaign.id,terminal:this.terminal.id,timesession:""},console.log(this.session),this.$http.post("https://puls-preprod.herokuapp.com/session/",this.session).then((function(e){console.log(e),t.$store.commit("deleteGamingStates"),t.$router.push("/start")})).catch((function(t){console.log(t.response)}))}}},Ze=Ye,ta=Object(m["a"])(Ze,Qe,Xe,!1,null,null,null),ea=ta.exports;s["a"].use(g["a"]);var aa=[{path:"/",name:"home",component:T},{path:"/users",name:"users",component:j,meta:{requiresAuth:!0}},{path:"/campaigns",name:"campaings",component:U,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/add",name:"add-campaign",component:bt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/:id",name:"campaign",component:Q,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/:id/edit",name:"edit-campaign",component:lt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/customers",name:"customers",component:kt},{path:"/login",name:"login",component:de,meta:{requiresAnon:!0}},{path:"/start",name:"start",component:Ce,meta:{requiresAuth:!0}},{path:"/stop",name:"stop",component:ke,meta:{requiresAuth:!0}},{path:"/donator/",name:"donator",component:Se,meta:{requiresAuth:!0,onlyFrom:"payment"}},{path:"/donator/login",name:"donator-login",component:Ie,meta:{requiresAuth:!0,onlyFrom:"donator"}},{path:"/payment",name:"payment",component:Ge,meta:{requiresAuth:!0,onlyFrom:"start"}},{path:"/play",name:"play",component:Ke,meta:{requiresAuth:!0,onlyFrom:"donator-login"}},{path:"/endgame",name:"endgame",component:ea,meta:{requiresAuth:!0,onlyFrom:"play"}},{path:"/terminals",name:"terminals",component:It,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/terminal/add",name:"add-terminal",component:oe,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/terminal/:id",name:"terminal",component:Gt,meta:{requiresAuth:!0}},{path:"/terminal/:id/edit",name:"edit-terminal",component:ee,meta:{requiresAuth:!0}}],sa=new g["a"]({routes:aa});sa.beforeEach((function(t,e,a){if(t.matched.some((function(t){return t.meta.onlyFrom}))){if(e.name==t.meta.onlyFrom)return void a();a("/start")}else if(t.matched.some((function(t){return t.meta.requiresAdmin}))){if(w.getters.isAdmin)return void a();a("/")}else if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(w.getters.isLoggedIn)return void a();a("/login")}else if(t.matched.some((function(t){return t.meta.requiresAnon}))){if(!w.getters.isLoggedIn)return void a();a("/")}else a()}));var na=sa,ia=(a("4989"),a("ab8b"),a("ecee")),ra=a("c074"),oa=a("ad3d");ia["c"].add(ra["d"],ra["a"],ra["c"],ra["b"]),s["a"].component("font-awesome-icon",oa["a"]),s["a"].config.productionTip=!1,s["a"].prototype.$http=b.a;var la=localStorage.getItem("token");la&&(s["a"].prototype.$http.defaults.headers.common["Authorization"]=la),new s["a"]({router:na,store:w,render:function(t){return t(f)}}).$mount("#app")},"67d6":function(t,e,a){t.exports=a.p+"img/contactless.56cc6983.png"},"755e":function(t,e,a){},"85ec":function(t,e,a){},f77e:function(t,e,a){"use strict";var s=a("755e"),n=a.n(s);n.a}});
//# sourceMappingURL=app.378ac0d1.js.map